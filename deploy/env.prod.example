# ============================================
# EMR Production Environment Variables
# ============================================
# Copy this file to .env.prod and fill in all values
# NEVER commit .env.prod to version control

# ============================================
# Application Configuration
# ============================================
NODE_ENV=production
APP_BASE_URL=https://yourdomain.com
DOMAIN=yourdomain.com
LETSENCRYPT_EMAIL=admin@yourdomain.com

# ============================================
# Database Configuration
# ============================================
DB_USER=emr_user
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
DB_NAME=emr_db
DATABASE_URL=postgresql://emr_user:CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS@db:5432/emr_db?sslmode=require

# ============================================
# Security - REQUIRED FOR HIPAA COMPLIANCE
# ============================================

# PHI Encryption - MUST be true in production
ENABLE_PHI_ENCRYPTION=true

# Encryption Key Management
# Options: local, aws-kms, gcp-kms, azure-keyvault
ENCRYPTION_KEY_MANAGEMENT=local

# For AWS KMS:
# AWS_KMS_KEY_ID=arn:aws:kms:us-east-1:123456789012:key/12345678-1234-1234-1234-123456789012
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# For GCP KMS:
# GCP_KMS_KEY_RING=your-key-ring
# GCP_KMS_KEY_NAME=your-key-name
# GCP_PROJECT_ID=your-project-id
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# For Azure Key Vault:
# AZURE_KEY_VAULT_URL=https://your-vault.vault.azure.net/
# AZURE_TENANT_ID=your-tenant-id
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret

# For local encryption (development/testing only):
# ENCRYPTION_KEY=<generate-strong-32-byte-key-base64>

# HTTPS Enforcement
FORCE_HTTPS=true

# Session Configuration
SESSION_SECRET=CHANGE_ME_GENERATE_STRONG_RANDOM_SECRET_64_CHARS_MIN
SESSION_TIMEOUT=900000
# Session timeout in milliseconds (900000 = 15 minutes)

# JWT Configuration
JWT_SECRET=CHANGE_ME_GENERATE_STRONG_RANDOM_SECRET_64_CHARS_MIN
JWT_EXPIRES_IN=12h

# Password Hashing
BCRYPT_ROUNDS=12

# ============================================
# Audit Logging - REQUIRED FOR HIPAA
# ============================================
ENABLE_AUDIT_LOGGING=true
LOG_LEVEL=info
# Log levels: error, warn, info, debug

# ============================================
# Backup Configuration
# ============================================
BACKUP_ENCRYPTION_KEY=CHANGE_ME_GENERATE_STRONG_RANDOM_KEY_32_BYTES
BACKUP_RETENTION_DAYS=30

# AWS S3 Backup (optional but recommended)
# AWS_S3_BACKUP_BUCKET=your-emr-backups-bucket
# AWS_S3_BACKUP_REGION=us-east-1

# ============================================
# File Upload Configuration
# ============================================
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=5242880
# Max file size in bytes (5MB default)

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# CORS Configuration
# ============================================
FRONTEND_URL=https://yourdomain.com
CORS_ORIGIN=https://yourdomain.com

# ============================================
# Email Configuration (if needed)
# ============================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# SMTP_FROM=noreply@yourdomain.com

# ============================================
# Monitoring (optional)
# ============================================
# HEALTHCHECKS_IO_URL=https://hc-ping.com/your-uuid
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================
# Notes
# ============================================
# 1. Generate strong secrets using:
#    openssl rand -base64 32
#
# 2. For production, use a proper KMS (AWS/GCP/Azure)
#    instead of local encryption
#
# 3. Never commit this file or .env.prod to git
#
# 4. Rotate secrets regularly (quarterly recommended)
#
# 5. Keep backups of encryption keys in secure location

